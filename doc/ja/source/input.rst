入力ファイル
=====================

入力ファイルでは共通パラメータと、各探索手法固有のパラメータを指定します。
ファイル形式は ``TOML`` を採用しています。
ここでは、はじめに共通パラメータを、次に手法毎のパラメータを説明します。

共通パラメータ
------------------------

[``base``], [``file``], [``experiment``]の3つのセクションから構成されます。
以下、順に説明します。

[``base``] セクション
************************

- ``dimension``

  形式: 整数型 (default: 2)

  説明: 探索空間の次元（探索するパラメータの数）

- ``normalization``

  形式: string型。"TOTAL"または"MAX"のいずれかをとります。 (default: "TOTAL")

  説明: R値の規格化の方法。全体の和で規格化するか最大値で規格化するかを指定します。

- ``label_list``

  形式: string型のリスト。長さはdimensionの値と一致させます。 (default: ["z1(Si)", "z2(Si)"])

  説明: 軸のラベル名。

- ``string_list``

  形式: string型のリスト。長さはdimensionの値と一致させます。 (default: ["value_01", "value_02"])

  説明: template.txt で利用するプレースホルダーのリスト。これらの文字列が探索中のパラメータの値に置換されます。

- ``surface_input_file``

  形式: string型 (default: "surf.txt")

  説明: 表面構造のインプットファイル。

- ``bulk_output_file``

  形式: string型 (default: "bulkP.b")

  説明: バルク構造のアウトプットファイル。
 
- ``surface_output_file``  

  形式: string型 (default: "surf-bulkP.s")

  説明: 表面構造のアウトプットファイル。

- ``Rfactor_type``

  形式: string型。"A"または"B"のいずれかをとります。 (default: "A")

  説明: Rファクターの計算方法の指定。"A"だと通常の方法、"B"だとPendryのRファクターを計算します。

- ``omega``

  形式: 実数型 (default: 0.5)

  説明: コンボリューションの半値幅の指定。

- ``degree_max``

  形式: 実数型 (default: 6.0)

  説明: 最大角度（度単位）の指定

  
- ``main_dir``

  形式: string型 (default: プログラム実行時のディレクトリ)

  説明: プログラム実行時にファイルの入出力を行うメインディレクトリ
  

[``file``] セクション
********************************************************

- ``calculated_first_line``
  
  形式: 整数型 (default: 5)

  説明: ソルバーにより計算された出力ファイルを読み込む範囲を指定するパラメータ。読み込む最初の行を指定。

- ``calculated_last_line``

  形式: 整数型 (default: 60)

  説明: ソルバーにより計算された出力ファイルを読み込む範囲を指定するパラメータ。読み込む最後の行を指定。

- ``row_number``
  
  形式: 整数型 (default: 8)

  説明: ソルバーにより計算された出力ファイルを読み込む範囲を指定するパラメータ。読み込む列を指定。


[``experiment``] セクション
********************************************************

- ``path``

  形式: string型 (default: ``experiment.txt``)

  説明: 実験データファイルへのパス。
  
- ``first``

  形式: 整数型 (default: 1)

  説明: 実験データファイルを読み込む範囲を指定するパラメータ。実験ファイルを読み込む最初の行を指定。

- ``last``

  形式: 整数型 (default: 56)

  説明: 実験データファイルを読み込む範囲を指定するパラメータ。実験ファイルを読み込む最後の行を指定。
  
  
  
``minsearch`` で指定するパラメータ
----------------------------------

[``param``] セクション
********************************************************

探索空間が3次元であることを仮定してデフォルトの数値が設定されています。

- ``initial_list``

  形式: 実数型のリスト。長さはdimensionの値と一致させます。 (default: [5.25,4.25,3.50] )

  説明: 初期値のリスト。

- ``unit_list``

  形式: 実数型のリスト。長さはdimensionの値と一致させます。 (default: [1.0, 1.0, 1.0] )

  説明: 各パラメータの単位を指定するリスト。探索アルゴリズム中では、各パラメータをそれぞれこれらの値で割ることで、簡易的な無次元化・正規化を行います。

- ``minlist``

  形式: 実数型のリスト。長さはdimensionの値と一致させます。(default: [-10.0, -10.0])

  説明: パラメータが取りうる最小値のリスト。

- ``maxlist``

  形式: 実数型のリスト。長さはdimensionの値と一致させます。(default: [10.0, 10.0])

  説明: パラメータが取りうる最大値のリスト。  

- ``initial_scale_list``


- ``xtol``

    形式: 実数型 (default: 1e-4)


- ``ftol``

    形式: 実数型 (default: 1e-4)


``mapper_mpi`` で指定するパラメータ
-------------------------------------

[``file``] セクション
********************************************************

- ``mesh_path``

  

``exchange`` で指定するパラメータ
--------------------------------------

[``param``] セクション
********************************************************

- ``initial_list``

  形式: 実数型のリスト。長さはdimensionの値と一致させます。 (default: [5.25,4.25,3.50] )

  説明: 初期値のリスト。

- ``unit_list``

  形式: 実数型のリスト。長さはdimensionの値と一致させます。 (default: [1.0, 1.0, 1.0] )

  説明: 各パラメータの単位を指定するリスト。
        探索アルゴリズム中では、各パラメータをそれぞれこれらの値で割ることで、
        簡易的な無次元化・正規化を行います。

- ``minlist``

  形式: 実数型のリスト。長さはdimensionの値と一致させます。(default: [-10.0, -10.0])

  説明: パラメータが取りうる最小値のリスト。

- ``maxlist``

  形式: 実数型のリスト。長さはdimensionの値と一致させます。(default: [10.0, 10.0])

  説明: パラメータが取りうる最大値のリスト。  

- ``numstep``

  形式: 整数値。

  説明: モンテカルロ更新を行う回数。

- ``numstep_exchange``

  形式: 整数値。

  説明: 「温度」のレプリカ交換を行う頻度。この回数だけモンテカルロ更新を行ったらレプリカ交換を実行します。

- ``Tmin``

  形式: 実数値。 (default: 0.1)

  説明: 「温度」の最小値。

- ``Tmax``

  形式: 実数値。 (default: 10.0)

  説明: 「温度」の最大値。

- ``Tlogspace``

  形式: 真偽値。 (default: true)

  説明: 「温度」を各レプリカに割り当てる際に、対数空間で等分割するか否かを指定します。
        true のときは対数空間で等分割します。

- ``seed``

  形式: 整数値。

  説明: モンテカルロ更新で用いる擬似乱数生成器の種を指定します。
        各MPIプロセスに対して、 ``seed + mpi_rank * seed_delta`` の値が実際の種として用いられます。
        省略した場合は `Numpy の規定の方法 <https://numpy.org/doc/stable/reference/random/generator.html#numpy.random.default_rng>`_ で初期化されます。


- ``seed_delta``

  形式: 整数値。 (default: 314159)

  説明: 疑似乱数生成器の種について、MPI プロセスごとの値を計算する際に用いられます。
        詳しくは ``seed`` を参照してください。
